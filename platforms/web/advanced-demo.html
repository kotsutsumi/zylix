<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zylix - Advanced Features Demo</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%);
      color: #e4e4e7;
      min-height: 100vh;
      padding: 40px 20px;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    header {
      text-align: center;
      margin-bottom: 40px;
    }
    h1 {
      font-size: 2.5rem;
      background: linear-gradient(135deg, #818cf8, #c084fc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 10px;
    }
    .subtitle {
      color: #9ca3af;
      font-size: 1.1rem;
    }
    .demo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 25px;
    }
    .demo-card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .demo-header {
      padding: 15px 20px;
      background: rgba(129, 140, 248, 0.1);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .demo-icon {
      font-size: 1.5rem;
    }
    .demo-title {
      font-size: 1.1rem;
      font-weight: 600;
    }
    .demo-content {
      padding: 20px;
    }
    .demo-description {
      color: #9ca3af;
      font-size: 0.9rem;
      margin-bottom: 15px;
    }
    .demo-area {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      padding: 20px;
      min-height: 150px;
    }
    button {
      padding: 8px 16px;
      background: #4f46e5;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      margin: 5px;
    }
    button:hover { background: #4338ca; }
    button.secondary {
      background: #374151;
    }
    button.secondary:hover { background: #4b5563; }
    button.danger {
      background: #dc2626;
    }
    button.danger:hover { background: #b91c1c; }
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal {
      background: #1e293b;
      border-radius: 12px;
      padding: 30px;
      max-width: 400px;
      width: 90%;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .modal h2 {
      margin-bottom: 15px;
      color: #a5b4fc;
    }
    .modal p {
      color: #9ca3af;
      margin-bottom: 20px;
    }
    .tooltip-wrapper {
      position: relative;
      display: inline-block;
    }
    .tooltip {
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: #1e1b4b;
      color: #e4e4e7;
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 0.85rem;
      white-space: nowrap;
      margin-bottom: 8px;
      opacity: 0;
      transition: opacity 0.2s;
      pointer-events: none;
    }
    .tooltip-wrapper:hover .tooltip {
      opacity: 1;
    }
    .virtual-list {
      height: 200px;
      overflow-y: auto;
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
    }
    .virtual-list-item {
      padding: 10px 15px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }
    .virtual-list-item:hover {
      background: rgba(255, 255, 255, 0.05);
    }
    .animation-box {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #818cf8, #c084fc);
      border-radius: 8px;
      transition: all 0.3s;
    }
    .animation-box.bounce {
      animation: bounce 0.5s ease-out;
    }
    .animation-box.spin {
      animation: spin 0.5s ease-out;
    }
    .animation-box.shake {
      animation: shake 0.5s ease-out;
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-30px); }
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    .error-boundary {
      background: rgba(220, 38, 38, 0.1);
      border: 1px solid #dc2626;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
    }
    .error-boundary h3 {
      color: #f87171;
      margin-bottom: 10px;
    }
    .context-demo {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .theme-toggle {
      display: flex;
      gap: 10px;
    }
    .theme-preview {
      padding: 15px;
      border-radius: 8px;
      text-align: center;
    }
    .theme-preview.light {
      background: #f8fafc;
      color: #1e293b;
    }
    .theme-preview.dark {
      background: #1e293b;
      color: #f8fafc;
    }
    .suspense-loading {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100px;
      color: #9ca3af;
    }
    .suspense-loading::after {
      content: '';
      width: 20px;
      height: 20px;
      border: 2px solid #818cf8;
      border-top-color: transparent;
      border-radius: 50%;
      margin-left: 10px;
      animation: spin 0.8s linear infinite;
    }
    .loaded-content {
      padding: 15px;
      background: rgba(16, 185, 129, 0.1);
      border-radius: 8px;
      border: 1px solid rgba(16, 185, 129, 0.3);
    }
    #app { min-height: 100vh; }
  </style>
</head>
<body>
  <div id="app">
    <div class="container">
      <header>
        <h1>Zylix Advanced Features</h1>
        <p class="subtitle">Error Boundaries, Context, Portal, Suspense, Virtual Scrolling, Animations</p>
      </header>

      <div class="demo-grid">

        <!-- Error Boundary Demo -->
        <div class="demo-card">
          <div class="demo-header">
            <span class="demo-icon">üõ°Ô∏è</span>
            <span class="demo-title">Error Boundaries</span>
          </div>
          <div class="demo-content">
            <p class="demo-description">
              Catch and handle errors gracefully with fallback UI.
            </p>
            <div class="demo-area" id="error-boundary-demo">
              <div style="margin-bottom: 15px;">
                <button onclick="triggerError()">Trigger Error</button>
                <button class="secondary" onclick="resetError()">Reset</button>
              </div>
              <div id="error-boundary-content">
                <p>Component is working normally.</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Context API Demo -->
        <div class="demo-card">
          <div class="demo-header">
            <span class="demo-icon">üîÑ</span>
            <span class="demo-title">Context API</span>
          </div>
          <div class="demo-content">
            <p class="demo-description">
              Share state across components without prop drilling.
            </p>
            <div class="demo-area">
              <div class="context-demo">
                <div class="theme-toggle">
                  <button onclick="setTheme('light')">Light Theme</button>
                  <button onclick="setTheme('dark')">Dark Theme</button>
                </div>
                <div id="theme-preview" class="theme-preview dark">
                  Current theme: <strong>dark</strong>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Portal/Modal Demo -->
        <div class="demo-card">
          <div class="demo-header">
            <span class="demo-icon">üö™</span>
            <span class="demo-title">Portal & Modal</span>
          </div>
          <div class="demo-content">
            <p class="demo-description">
              Render content outside the parent component tree.
            </p>
            <div class="demo-area">
              <button onclick="openModal()">Open Modal</button>
              <div class="tooltip-wrapper" style="margin-left: 10px;">
                <button class="secondary">Hover for Tooltip</button>
                <div class="tooltip">This is a tooltip!</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Suspense Demo -->
        <div class="demo-card">
          <div class="demo-header">
            <span class="demo-icon">‚è≥</span>
            <span class="demo-title">Suspense</span>
          </div>
          <div class="demo-content">
            <p class="demo-description">
              Handle async rendering with loading states.
            </p>
            <div class="demo-area" id="suspense-demo">
              <button onclick="loadAsyncContent()">Load Async Content</button>
              <div id="suspense-content" style="margin-top: 15px;"></div>
            </div>
          </div>
        </div>

        <!-- Virtual Scrolling Demo -->
        <div class="demo-card">
          <div class="demo-header">
            <span class="demo-icon">üìú</span>
            <span class="demo-title">Virtual Scrolling</span>
          </div>
          <div class="demo-content">
            <p class="demo-description">
              Efficiently render large lists with virtualization.
            </p>
            <div class="demo-area">
              <p style="margin-bottom: 10px; font-size: 0.85rem; color: #9ca3af;">
                10,000 items rendered efficiently:
              </p>
              <div class="virtual-list" id="virtual-list"></div>
            </div>
          </div>
        </div>

        <!-- Animations Demo -->
        <div class="demo-card">
          <div class="demo-header">
            <span class="demo-icon">‚ú®</span>
            <span class="demo-title">Animations API</span>
          </div>
          <div class="demo-content">
            <p class="demo-description">
              Smooth animations with easing and spring physics.
            </p>
            <div class="demo-area">
              <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 15px;">
                <div class="animation-box" id="animation-box"></div>
                <div>
                  <button onclick="animateBounce()">Bounce</button>
                  <button onclick="animateSpin()">Spin</button>
                  <button onclick="animateShake()">Shake</button>
                </div>
              </div>
              <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button class="secondary" onclick="animateColor()">Color Fade</button>
                <button class="secondary" onclick="animateSlide()">Slide</button>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Modal Portal Target -->
  <div id="modal-root"></div>

  <script>
    // =========================================================================
    // Error Boundary Demo
    // =========================================================================

    let hasError = false;

    function triggerError() {
      hasError = true;
      document.getElementById('error-boundary-content').innerHTML = `
        <div class="error-boundary">
          <h3>Something went wrong!</h3>
          <p style="color: #9ca3af;">The component encountered an error.</p>
          <button onclick="resetError()">Try Again</button>
        </div>
      `;
    }

    function resetError() {
      hasError = false;
      document.getElementById('error-boundary-content').innerHTML = `
        <p>Component is working normally.</p>
      `;
    }

    // =========================================================================
    // Context API Demo
    // =========================================================================

    let currentTheme = 'dark';

    function setTheme(theme) {
      currentTheme = theme;
      const preview = document.getElementById('theme-preview');
      preview.className = `theme-preview ${theme}`;
      preview.innerHTML = `Current theme: <strong>${theme}</strong>`;
    }

    // =========================================================================
    // Portal/Modal Demo
    // =========================================================================

    let modalOpen = false;

    function openModal() {
      modalOpen = true;
      const modalRoot = document.getElementById('modal-root');
      modalRoot.innerHTML = `
        <div class="modal-backdrop" onclick="closeModalBackdrop(event)">
          <div class="modal">
            <h2>Portal Modal</h2>
            <p>This modal is rendered outside the main component tree using a Portal!</p>
            <button onclick="closeModal()">Close</button>
          </div>
        </div>
      `;
    }

    function closeModal() {
      modalOpen = false;
      document.getElementById('modal-root').innerHTML = '';
    }

    function closeModalBackdrop(e) {
      if (e.target.classList.contains('modal-backdrop')) {
        closeModal();
      }
    }

    // Close modal on Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && modalOpen) {
        closeModal();
      }
    });

    // =========================================================================
    // Suspense Demo
    // =========================================================================

    function loadAsyncContent() {
      const container = document.getElementById('suspense-content');

      // Show loading state
      container.innerHTML = `
        <div class="suspense-loading">Loading data...</div>
      `;

      // Simulate async data fetching
      setTimeout(() => {
        container.innerHTML = `
          <div class="loaded-content">
            <strong>Data loaded successfully!</strong>
            <p style="margin-top: 8px; color: #9ca3af;">
              User: John Doe<br>
              Email: john@example.com<br>
              Role: Administrator
            </p>
          </div>
        `;
      }, 1500);
    }

    // =========================================================================
    // Virtual Scrolling Demo
    // =========================================================================

    function initVirtualList() {
      const container = document.getElementById('virtual-list');
      const itemCount = 10000;
      const itemHeight = 40;
      const containerHeight = 200;

      // Create inner container
      const inner = document.createElement('div');
      inner.style.height = `${itemCount * itemHeight}px`;
      inner.style.position = 'relative';
      container.appendChild(inner);

      // Render visible items
      function renderVisibleItems() {
        const scrollTop = container.scrollTop;
        const startIndex = Math.floor(scrollTop / itemHeight);
        const endIndex = Math.min(
          startIndex + Math.ceil(containerHeight / itemHeight) + 2,
          itemCount
        );

        // Clear and re-render
        inner.innerHTML = '';
        for (let i = startIndex; i < endIndex; i++) {
          const item = document.createElement('div');
          item.className = 'virtual-list-item';
          item.style.position = 'absolute';
          item.style.top = `${i * itemHeight}px`;
          item.style.width = '100%';
          item.style.height = `${itemHeight}px`;
          item.textContent = `Item ${i + 1} - Virtual rendered`;
          inner.appendChild(item);
        }
      }

      container.addEventListener('scroll', renderVisibleItems);
      renderVisibleItems();
    }

    // =========================================================================
    // Animations Demo
    // =========================================================================

    function animateBounce() {
      const box = document.getElementById('animation-box');
      box.classList.remove('bounce', 'spin', 'shake');
      void box.offsetWidth; // Trigger reflow
      box.classList.add('bounce');
    }

    function animateSpin() {
      const box = document.getElementById('animation-box');
      box.classList.remove('bounce', 'spin', 'shake');
      void box.offsetWidth;
      box.classList.add('spin');
    }

    function animateShake() {
      const box = document.getElementById('animation-box');
      box.classList.remove('bounce', 'spin', 'shake');
      void box.offsetWidth;
      box.classList.add('shake');
    }

    function animateColor() {
      const box = document.getElementById('animation-box');
      const colors = [
        'linear-gradient(135deg, #818cf8, #c084fc)',
        'linear-gradient(135deg, #10b981, #3b82f6)',
        'linear-gradient(135deg, #f59e0b, #ef4444)',
        'linear-gradient(135deg, #ec4899, #8b5cf6)',
      ];
      const current = box.style.background;
      let next = colors[Math.floor(Math.random() * colors.length)];
      while (next === current) {
        next = colors[Math.floor(Math.random() * colors.length)];
      }
      box.style.transition = 'background 0.5s ease';
      box.style.background = next;
    }

    function animateSlide() {
      const box = document.getElementById('animation-box');
      box.style.transition = 'transform 0.3s ease-out';
      box.style.transform = 'translateX(100px)';
      setTimeout(() => {
        box.style.transition = 'transform 0.3s ease-in';
        box.style.transform = 'translateX(0)';
      }, 300);
    }

    // =========================================================================
    // Initialize
    // =========================================================================

    document.addEventListener('DOMContentLoaded', () => {
      initVirtualList();
      console.log('Zylix Advanced Features Demo loaded');
    });
  </script>
</body>
</html>
