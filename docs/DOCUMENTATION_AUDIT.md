# Zylix Framework ドキュメント監査レポート

## 1. エグゼクティブサマリー

- **全体評価**: 4/5（主要な不整合は解消済み。残るのは更新運用の定着）
- **主要な強み**
  - ルート/内部/サイトで網羅的なドキュメント構成があり、参照先が多い
  - `docs/ROADMAP.md` と `docs/ROADMAP.ja.md` は成功基準まで詳細に記述されている
  - `site/content/` は EN/JA ペアが揃っており、`site/i18n/` もキー差分なし
- **主要な改善点**
  - 監査結果の継続更新（差分監査の定期実行）
  - API サマリー/詳細の運用ルール定着
  - 将来フェーズの設計ドキュメント補完

---

## 2. 詳細レポート

### A. 一貫性チェック

**現状評価**
- 主要ドキュメント群は揃っており、バージョン・ロードマップ・ステータスの整合性は概ね回復。

**発見した問題点（解消済み）**
- Zig/ABI/API の表記は `docs/COMPATIBILITY.md` に集約し、参照先を統一済み。
- `docs/ROADMAP.*` と `site/content/docs/roadmap.*` は要約版として同期済み。
- プラットフォーム成熟度表現（Production Ready / In Development）は全体で統一済み。
- watchOS を In Development として全体の表記に反映済み。

**具体的な改善提案（完了済み）**
- Zig/ABI/API 表記を `docs/COMPATIBILITY.md` 参照に統一。
- ロードマップとサイト要約の同期完了。
- 成熟度表現の統一完了。

---

### B. 完全性チェック

**現状評価**
- ロードマップの版数・要約は最新化済み。設計ドキュメントは v0.16.0〜v0.21.0 が未整備。

**発見した問題点（継続）**
- 設計ドキュメントの欠落:
  - `docs/designs/` に v0.16.0〜v0.21.0 が存在しない。
- ロードマップの Version Summary が欠落/ずれ:
  - `docs/ROADMAP.md` の「Planned Versions」に v0.12.0 が登場せず、v0.9.0〜v0.11.0 の内容がテーブルと一致しない。
- Getting Started のサンプル導線不足:
  - `README.md` の `samples/` 参照に対し、`site/content/docs/getting-started.md` は実際のサンプル導線が弱い。

**具体的な改善提案（継続）**
- v0.16.0〜v0.21.0 の設計ドキュメントを最小スコープで作成（目標・API・依存関係・リスクだけでも可）。
- `docs/ROADMAP.md` の Version Summary をテーブルと一致させ、欠落版を補完。
- Getting Started に `samples/` へのリンクと最短手順を追加。

---

### C. 技術的正確性

**現状評価**
- ABI/Test Framework/データフローの主要不整合は解消済み。

**発見した問題点（解消済み）**
- ABI 仕様書は v2 に更新済み。
- Test Framework は v0.8.1 実装済みとして反映済み。

**具体的な改善提案（完了済み）**
- ABI/Test Framework の更新完了。

---

### D. ロードマップ評価

**現状評価**
- v0.19.0〜v0.21.0 は野心的かつ相互依存が強い。技術的実現性の補強が必要。

**発見した問題点**
- 依存関係の明記不足:
  - v0.20.0 Server Runtime と v0.21.0 Edge は v0.19.0 Database Support の設計/実装に強く依存するが、前提条件が薄い。
- 実現難度が高い領域の前提が不十分:
  - Zig ネイティブ DB ドライバ、WASM + DB、Edge の TCP 制限などの難易度が明示されていない。

**具体的な改善提案**
- v0.19.0〜v0.21.0 について「前提/依存/制約/段階リリース」を明文化（後述のロードマップフィードバック参照）。

---

### E. ユーザビリティ

**現状評価**
- 「最短成功パス」（Getting Started → Tutorials → Core Concepts）を明記し、導線を統一済み。

**発見した問題点（解消済み）**
- Zig/成熟度/ロードマップの表記を統一済み。

**具体的な改善提案（完了済み）**
- `docs/COMPATIBILITY.md` への集約完了。
- 導線追加済み。

---

## 3. 優先度付きアクションアイテム

| 優先度 | 項目 | 理由 |
|--------|------|------|
| P0 (Critical) | Zig バージョン/ABI/API の記載統一 | ビルド失敗・実装不一致に直結 |
| P0 (Critical) | `docs/ABI.md` を `core/src/abi.zig` に合わせて更新 | 外部バインディング開発の致命的リスク |
| P1 (High) | `docs/ROADMAP.md` と `docs/ROADMAP.ja.md` の整合修正 | 事業計画の誤解を招く |
| P1 (High) | `site/content/docs/roadmap.*` を現行ロードマップに同期 | 公開情報の陳腐化 |
| P2 (Medium) | v0.16.0〜v0.21.0 の設計ドキュメント追加 | 将来実装の合意形成を容易にする |
| P2 (Medium) | Getting Started に `samples/` 導線を追加 | 初心者の成功率向上 |
| P3 (Low) | 外部リンク検証の自動化 | メンテナンス負荷の低減 |

---

## 4. ロードマップへのフィードバック（v0.19.0〜v0.21.0）

### v0.19.0 Database Support
- **技術的フィードバック**
  - Zig ネイティブで PostgreSQL/MySQL/SQLite/libSQL を同時に維持するには、抽象化レイヤ（接続/クエリ/トランザクション/型変換）を先に定義する必要がある。
  - WASM では TCP が制限されるため、HTTP プロキシ（REST/GraphQL/SQL over HTTP）を公式に想定し、WASM 対応を "proxy-first" にする方が現実的。
  - TLS/証明書/認証 (SASL/SCRAM) の対応計画が必須。
- **欠落している点**
  - マイグレーション/スキーマ管理、接続プール、リトライ戦略、データ型マッピングの方針。
  - Edge 環境向けのストレージ（D1/libSQL/Neon）との整合。

### v0.20.0 Server Runtime (Zylix Server)
- **技術的フィードバック**
  - サーバーランタイムは DB だけでなく、HTTP ルーティング、認証、ログ、設定、監視、エラー分類などの「運用機能」を前提に設計する必要がある。
  - クライアント/サーバー型安全 RPC は Zig 側の型情報公開・スキーマ生成をどうするかが鍵。
  - イベントループ/async ランタイムの設計がエッジ展開に影響する。
- **欠落している点**
  - 認証・認可、セッション管理、レートリミットの基本方針。
  - 「最低限の機能セット（MVP）」の定義。

### v0.21.0 Edge Adapters
- **技術的フィードバック**
  - Cloudflare/Vercel/AWS はランタイム制約が大きく異なるため、共通 API よりも「機能マトリクス＋アダプター」で割り切る設計が必要。
  - Zig→WASM のバイナリサイズ最適化と起動時間は採用の鍵。ロードマップ内で明確な目標値を示すべき。
- **欠落している点**
  - ストレージ/KV/DB の互換性設計（D1、KV、DynamoDB、Neon 等）。
  - エッジ特有の observability（ログ/トレース/メトリクス）設計。

---

## 補足: チェック結果（サイト翻訳）

- `site/content/` の EN/JA ペア差分は未検出。
- `site/i18n/` のキー差分は未検出。
